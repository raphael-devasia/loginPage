
<%- include('header') %>
<section class="vh-100 gradient-custom">
  <div class="container py-5 h-100">
    <div class="row justify-content-center align-items-center h-100">
      <div class="col-12 col-lg-9 col-xl-7">
        <div class="card shadow-2-strong card-registration" style="border-radius: 15px;">
          <div class="card-body p-4 p-md-5">
            <h3 class="mb-4 pb-2 pb-md-0 mb-md-5 text-center"><%= locals.access %> Registration Form</h3>
            <form action="<%= locals.isAdmin ? '/admin/register' : '/register' %>" method="post" id="cform">

              <div class="row">
                <div class="col-md-6 mb-4">

                  <div data-mdb-input-init class="form-outline">
                    
                    <input type="text" id="firstName" class="form-control form-control-lg" name="fullName"  />
                    <label class="form-label" for="fullName">Full Name</label>
                  </div>

                </div>
                <div class="col-md-6 mb-4">

                  <div data-mdb-input-init class="form-outline">
                    
                    <input type="text" id="userName" class="form-control form-control-lg" name="userName" />
                    <label class="form-label" for="userName">User Name</label>
                  </div>

                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-4 d-flex align-items-center">
 <div data-mdb-input-init class="form-outline">
 
                    <input type="tel" id="phoneNumber" class="form-control form-control-lg" name="phone" />
                    <label class="form-label" for="phoneNumber">Phone Number</label>
                  </div>

                 





                </div>
                <div class="col-md-6 mb-4">

                  <h6 class="mb-2 pb-1">Gender: </h6>

                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="femaleGender" 
                      value="female" checked  />
                    <label class="form-check-label" for="femaleGender">Female</label>
                  </div>

                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="maleGender"
                      value="male" />
                    <label class="form-check-label" for="maleGender">Male</label>
                  </div>

                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="otherGender"
                      value="other" />
                    <label class="form-check-label" for="otherGender">Other</label>
                  </div>

                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-4 pb-2">

                  <div data-mdb-input-init class="form-outline">
                    
                    <input type="email" id="emailAddress" class="form-control form-control-lg" name="email" />
                    <label class="form-label" for="email">Email</label>
                  </div>
                  

                </div>
                <div class="col-md-6 mb-4 pb-2">

                  <div data-mdb-input-init class="form-outline datepicker w-100">
                    
                    <input type="password" class="form-control form-control-lg" id="password" name="password"  />
                    <label for="password" class="form-label">Password</label>
                  </div>
                </div>

               

             <div class="mt-4 pt-2 d-block text-center"> <!-- Centering the button -->
                <input data-mdb-button-init data-mdb-ripple-init class="btn btn-primary btn-lg" type="submit" value="Submit" id="registerbtn"/>
              </div>

            </form>
            <div class="error-message text-danger" id="errorMessage"><% if (locals.success) { %>
    <p><%= locals.success %></p>
<% } else if (locals.existmsg) { %>
    <p><%= locals.existmsg %></p>
<% } %>
 </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<script>

  const cform = document.getElementById("cform")
cform.addEventListener("submit", (event) => {
    event.preventDefault()
    console.log("begin validation");
    const name = document.getElementById("firstName")
    const user = document.getElementById("userName")
    const phone = document.getElementById("phoneNumber")
    const email = document.getElementById("emailAddress")
    const password = document.getElementById("password")
    const emailRegex =
        /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/



        
        const passwordPattern = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/
        const userNamePattern =
            /^(?=[a-zA-Z0-9._]{8,20}$)(?!.*[_.]{2})[^_.].*[^_.]$/
        const phonePattern =
            /^(\+\d{1,2}\s?)?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/
        const namePattern = /^[A-Za-z]+(?: [A-Za-z]+)+$/

    if (name.value.trim() == "") {
        alert("Name can't be blank")

    } else if (!emailRegex.test(email.value)) {
        alert("Enter a valid email")
    } 
    else if (!passwordPattern.test(password.value)) {
        alert("Enter a valid password")
    }
     else if (!userNamePattern.test(user.value)) {
         alert("Enter a valid username")
     } else if (!phonePattern.test(phone.value)) {
         alert("Enter a valid phone number")
     } else {
         cform.submit()
         cform.reset()
         console.log("end validation");
         // var messageElement = document.getElementsByClassName("loading")
         // messageElement.style.display = "block"
         // // Hide the message after 4 seconds
         // setTimeout(function () {
         //     messageElement.style.display = "none"
         // }, 4000) // 4 seconds (4000 milliseconds)
     }
})


</script>


<%- include('footer') %>